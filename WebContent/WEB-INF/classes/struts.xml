<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>

	<!-- struts.ui.theme=simple可以解决struts2标签自动换行问题，即不再自动被添加进table标签中 -->
	<constant name="struts.ui.theme" value="simple" /> 
	<constant name="struts.ui.templateDir" value="template" /> 
	<constant name="struts.ui.templateSuffix" value="ftl" /> 

	<!-- 处理编码乱码问题 -->
	<!-- <constant name="struts.i18n.encoding" value="gbk"></constant>-->
	<constant name="struts.i18n.encoding" value="UTF-8" />	
	
	<constant name="struts.objectFactory" value="spring"></constant>
	
	
	<constant name="struts.devMode" value="false" />
	
	
	
	<!-- session超时拦截器 -->
	<package name="iterceptor" namespace="/" extends="struts-default">
		<interceptors>
            <!-- 自定义拦截器 -->
            <interceptor name="permission" class="order.hq.basic.iterceptor.SessionIterceptor" />
            <!-- 配制默许的拦截器到拦截器栈 -->
            <interceptor-stack name="permissionStack">
                <!-- 此处先后顺序没影响-->
                <interceptor-ref name="permission" />
                <interceptor-ref name="defaultStack" />
                
                <!-- 防止重复提交 -->
                <!--<interceptor-ref name="token" /> -->
            </interceptor-stack>
        </interceptors>
        <!-- 配置默认的拦截器 -->
        <default-interceptor-ref name="permissionStack" />
        
        <!-- 配置默认的类 -->
        <default-class-ref class="com.opensymphony.xwork2.ActionSupport"></default-class-ref>
        
        <!-- 全局变量,超时返回登录页面 -->
        <global-results>
            <result name="loginPage">/include/session.jsp</result>
            <result name="error">error.jsp</result>
            <result name="invalid.token">error.jsp</result>
        </global-results>
        
        		
		<global-exception-mappings>
			<exception-mapping result="error" exception="java.lang.Exception"></exception-mapping>
		</global-exception-mappings>
		
 	</package>
 
 	<!-- session超时不需要返回登录页面的配置文件 -->
	<package  name="noIterceptor" namespace="/" extends="struts-default">
	</package>
	<!-- session超时返回登录页面的配置文件 -->
	<package name="nscloud" namespace="/" extends="iterceptor">
	</package>
	
	
	
	<package name="loginModel" extends="struts-default" namespace="/login">
		<action name="loginAction" class="order.hq.web.action.LoginAction">
			<result name="success">/main.jsp</result>
			<result name="loginPage">/login.jsp</result>
			<result name="fail">/login.jsp</result>
		</action>
	</package>
	
	<package name="systemModel" extends="iterceptor" namespace="/system">
	
		<action name="sectionAction" class="order.hq.web.action.SectionAction">
			<result name="query">/jsp/system/section/sectionQuery.jsp</result>
			<result name="editFunction">/jsp/system/section/editFunction.jsp</result>
			<result name="editFunctionTree">/jsp/system/section/editFunctionTree.jsp</result>
			<result name="editFunctionZTree">/jsp/system/section/editFunctionZTree.jsp</result>
			<result name="editOrganzation">/jsp/system/section/editOrganzation.jsp</result>
			<result name="*">/jsp/system/section/section.jsp</result>
		</action>
		
		<action name="functionAction" class="order.hq.web.action.FunctionAction">
			<result name="query">/jsp/system/function/functionQuery.jsp</result>
			<result name="*">/jsp/system/function/function.jsp</result>
		</action>
		
		<action name="organzationAction" class="order.hq.web.action.OrganzationAction">
			<result name="query">/jsp/system/organzation/organzationQuery.jsp</result>
			<result name="*">/jsp/system/organzation/organzation.jsp</result>
		</action>
		
	
	<!-- 	
		<action name="*Action" class="order.hq.web.action.{1}Action">
			<result name="query">/jsp/system/{1}/{1}Query.jsp</result>
			<result name="*">/jsp/system/{1}/{1}.jsp</result>
		</action>
	-->	
	</package>
	
	
	<package name="userModel" extends="struts-default" namespace="/user">
	
		<action name="userAction" class="order.hq.web.action.UserAction">
			<result name="query">/jsp/system/user/userQuery.jsp</result>
			<result name="*">/jsp/system/user/user.jsp</result>
		</action>
		
	</package>
	
	
	

</struts>    
